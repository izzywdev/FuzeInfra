# dnsmasq configuration for local development DNS
# Handles *.dev.local domains for FuzeInfra projects

# Basic DNS settings
port=53
user=dnsmasq
group=dnsmasq

# Don't read /etc/resolv.conf - we want full control
no-resolv

# Upstream DNS servers (Google DNS as fallback)
server=8.8.8.8
server=8.8.4.4

# Local domain handling - route all *.dev.local to nginx container
address=/dev.local/127.0.0.1

# Specific service routing within Docker network
# These resolve within the FuzeInfra Docker network
address=/postgres.dev.local/postgres
address=/mongodb.dev.local/mongodb
address=/redis.dev.local/redis
address=/neo4j.dev.local/neo4j
address=/elasticsearch.dev.local/elasticsearch
address=/chromadb.dev.local/chromadb
address=/kafka.dev.local/kafka
address=/rabbitmq.dev.local/rabbitmq
address=/prometheus.dev.local/prometheus
address=/grafana.dev.local/grafana
address=/airflow.dev.local/airflow

# Enable DNS cache
cache-size=1000

# Log queries for debugging (disable in production)
log-queries
log-dhcp

# Don't read /etc/hosts
no-hosts

# Bind to all interfaces
bind-interfaces
listen-address=0.0.0.0

# Expand hosts file entries
expand-hosts

# Local domain
domain=dev.local

# Enable DHCP range for containers (if needed)
# dhcp-range=172.20.0.50,172.20.0.150,12h

# Additional logging
log-facility=/var/log/dnsmasq.log